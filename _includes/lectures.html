{% assign lecfolder="lectures/" %}
<style>
  .pagination>li>a,
  .pagination>li>a:focus {
    background-color: inherit;
  }
</style>
<div role="tappanel">
  <!-- Nav papignation-->
  <!--<ul role="tablist" id="event-tab" class=" pagination pagination-sm" >-->
  <!--http://stackoverflow.com/a/19777253  -->
  <ul role="tablist" id="event-tab" class="pagination small text-left">
    {% assign char="A|B|C|D|E|F|G" |split:"|"%} 
    {% capture nowunix %}{{'now'|date:'%s'}}{%endcapture%}
    {% assign MAXCOL= 5 %} 
    {% assign i=0 %} 
    {% assign starti=0 %}
    {% assign activei=0 %}
    {% assign foundactive=false%}
    <!-- To find the center (today or next to today or last day)-->
    {%for lecture in site.data.lectures reverse %}
    {% for lec in lecture.lecs %}
    {%capture dateunix%}{{lecture.date|date:'%s'}}{%endcapture%}
    {% if dateunix >= nowunix and foundactive==false%}
      {%assign activei=i%}
      {%assign foundactive=true %}
      {% if i==0%}
        {%assign starti=i%}
      {%else%}
        {%assign starti=i-1%}
      {%endif%}
      {% if parentlooplast and forloop.last %}
        {%assign starti=i%}
      {%else%}
        {%assign starti=i-1%}
      {%endif%}
    {%endif%}
    {%capture i%}{{ i | plus: 1 }}{%endcapture%}
    {% endfor %}
    {% endfor %}
    {% assign i=0 %}
    {%for lecture in site.data.lectures reverse %}
    {%assign parentloop=forloop%} 
    {% for lec in lecture.lecs %} 
    {% assign hide="hide" %}
    {% assign active="" %}
    {%capture id %}{{lecture.date | replace : '/','-'}}_{{forloop.index}}{%endcapture %}
    {%if forloop.length == 1%} {%capture date%}{{lecture.date| date: "%b, %d" }}{% endcapture %} 
    {%else%} {% assign ch=char[forloop.index0]%} {%capture date %}{{lecture.date| date: "%b, %d"}}{{ch}}{% endcapture %} 
    {%endif%} 
    {%if starti <= i and i<= endi %}{% assign hide=""%}{%endif%}
    {%if activei==i%}{% assign active="active"%}{%endif%}
        <li id="pg-{{id}}" role="presentation" class="{{active}} {{hide}} col-sx-2 col-md-2 ">
          <a href="#lecture-{{id}}" role="tab" data-url="{{lecfolder}}{{lec.url}}"  data-toggle="tab" class="small">
            {{date}}
          </a>
        </li>
    {%capture i%}{{ i | plus: 1 }}
    {%endcapture%} 
    {% endfor %} 
    {% endfor %}
  </ul>
  <!-- Tab panes -->
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active in" id="my-pagination-content">
    </div>
  </div>
</div>
<script>
  $('#event-tab a').click(function(e) {
    e.preventDefault();
    var url = $(this).attr("data-url");
    var pane = $(this);
    updatetab(url, pane);
    //$('#event-tab a').removeClass("active");
    //$(e).addClass("active");
  });
  //updatetab($('#event-tab .active a').attr("data-url"), $('#event-tab .active a'));
</script>
